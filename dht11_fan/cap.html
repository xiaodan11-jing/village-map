<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们的村庄地图</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f9f0;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: #2d5a2d;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .search-container {
            margin: 20px 0;
            text-align: center;
        }
        
        #search-input {
            padding: 10px 15px;
            width: 300px;
            border: 2px solid #4caf50;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        #search-input:focus {
            width: 400px;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        #search-btn {
            padding: 10px 20px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s ease;
        }
        
        #search-btn:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }
        
        .map-container {
            position: relative;
            width: 100%;
            height: 600px;
            background-color: #e8f5e8;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .map {
            width: 100%;
            height: 100%;
            background-image: url('background.jpg');
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .village {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: rgba(76, 175, 80, 0.9);
            border: 3px solid #fff;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .village::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background-color: #ffcc00;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .village:hover {
            transform: scale(1.2);
            background-color: rgba(76, 175, 80, 1);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }
        
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            width: 600px;
            max-width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }
        
        .popup.active {
            display: block;
        }
        
        .popup h2 {
            color: #2d5a2d;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .tab-container {
            margin: 20px 0;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #4caf50;
        }
        
        .tab-btn {
            padding: 10px 15px;
            background-color: #f0f9f0;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            color: #333;
            transition: all 0.3s ease;
            margin-right: 5px;
        }
        
        .tab-btn.active {
            background-color: #4caf50;
            color: white;
        }
        
        .tab-btn:hover {
            background-color: #e8f5e8;
        }
        
        .tab-btn.active:hover {
            background-color: #4caf50;
        }
        
        .tab-content {
            background-color: #f9f9f9;
            border-radius: 0 5px 5px 5px;
            padding: 20px;
        }
        
        .tab-pane {
            display: none;
            line-height: 1.6;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .tab-pane p {
            text-indent: 2em;
        }
        
        #village-resources {
            text-indent: 0;
        }
        
        #village-resources img {
            display: block;
            margin: 0 auto;
        }
        
        .tab-pane img {
            display: block;
            margin: 0 auto;
        }
        
        .popup-btn {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .popup-btn:hover {
            background-color: #45a049;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        .village-info {
            margin-top: 20px;
            padding: 20px;
            background-color: #e8f5e8;
            border-radius: 10px;
            border-left: 5px solid #4caf50;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background-color: #2d5a2d;
            color: white;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>村庄地图</h1>
            <p>探索我们的卡通村庄世界</p>
        </header>
        
        <div class="search-container">
            <input type="text" id="search-input" placeholder="搜索村庄...">
            <button id="search-btn">搜索</button>
        </div>
        
        <div class="map-container">
            <div class="map" id="map">
                <!-- 村庄标记 -->
                <div class="village" data-name="明月村" data-info="明月村位于四川省成都市蒲江县甘溪镇，是一座以陶艺文化为核心、融合川西林盘风貌的艺术村落。这里拥有千年制陶历史，是国家级生态文化村、中国乡村旅游创客示范基地，依托丰富的土地、集体资产、人力、生态与数据资源，已成为 “文创 + 文旅 + 农创” 融合发展的乡村振兴典范。" style="top: 15%; left: 25%;">明月村</div>
                <div class="village" data-name="呷古村" data-info="呷古村是一个具有浓郁民族特色的村庄，村民们保留着传统的生活方式和文化习俗。村里的手工艺品制作技艺精湛，尤其是银器和刺绣。" style="top: 25%; left: 65%;">呷古村</div>
                <div class="village" data-name="全兴村" data-info="全兴村是一个兴旺发达的村庄，近年来发展迅速，成为了当地的经济中心。村里有多个产业园区，涵盖了农业、工业和服务业。" style="top: 40%; left: 30%;">全兴村</div>
                <div class="village" data-name="高产村" data-info="高产村以农业生产为主，土地肥沃，气候适宜，是当地的粮食主产区。村民们采用现代化的种植技术，产量一直位居前列。" style="top: 55%; left: 70%;">高产村</div>
                <div class="village" data-name="嘉禾社区" data-info="嘉禾社区是一个现代化的农村社区，基础设施完善，环境优美。社区内有公园、图书馆、健身中心等公共设施，居民生活便利。" style="top: 20%; left: 50%;">嘉禾社区</div>
                <div class="village" data-name="竹艺村" data-info="竹艺村以竹编技艺闻名，村民们用当地丰富的竹子资源制作各种精美的竹制品，如竹篮、竹席、竹工艺品等。" style="top: 35%; left: 80%;">竹艺村</div>
                <div class="village" data-name="天星村" data-info="天星村位于高山之上，夜晚的星空格外美丽。村里以发展生态旅游为主，有多个观景台和民宿，吸引着众多游客前来观赏星空。" style="top: 60%; left: 20%;">天星村</div>
                <div class="village" data-name="陶家营村" data-info="陶家营村以制作陶瓷而闻名，村里有许多陶艺工作室和展览馆。村民们传承着古老的制陶技艺，制作出的陶瓷作品精美绝伦。" style="top: 75%; left: 45%;">陶家营村</div>
                <div class="village" data-name="宝胜村" data-info="宝胜村是一个历史悠久的村庄，村里有许多古老的建筑和文物。近年来，村庄大力发展文化旅游，吸引着众多游客前来参观。" style="top: 45%; left: 55%;">宝胜村</div>
                <div class="village" data-name="岷江村" data-info="岷江村位于岷江岸边，村民们世代以捕鱼和水运为生。村庄风景秀丽，沿江有许多观景步道和休闲设施。" style="top: 65%; left: 85%;">岷江村</div>
                <div class="village" data-name="甘哈觉莫村" data-info="甘哈觉莫村是一个神秘的村庄，村里保留着许多古老的传说和习俗。村民们信仰自然神灵，每年都会举办盛大的祭祀活动。" style="top: 20%; left: 75%;">甘哈觉莫村</div>
            </div>
        </div>
        
        <div class="village-info" id="village">
            <h2>村庄信息</h2>
            <p>点击地图上的村庄标记，了解更多关于每个村庄的详细信息。</p>
        </div>
    </div>
    
    <!-- 弹出窗口 -->
    <div class="overlay" id="overlay"></div>
    <div class="popup" id="popup">
        <h2 id="popup-title"></h2>
        <div class="tab-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="info">村情介绍</button>
                <button class="tab-btn" data-tab="resources">核心资源类型与价值分析</button>
                <button class="tab-btn" data-tab="suggestions">资源整合发展建议</button>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="info-tab">
                    <p id="village-info"></p>
                </div>
                <div class="tab-pane" id="resources-tab">
                    <p id="village-resources"></p>
                </div>
                <div class="tab-pane" id="suggestions-tab">
                    <p id="village-suggestions"></p>
                </div>
            </div>
        </div>
        <button class="popup-btn" id="close-popup">关闭</button>
    </div>
    
    <footer>
        <p>&copy; 2024 村庄地图 | 所有权利保留</p>
    </footer>
    
    <!-- 图片预览弹窗 -->
    <div class="image-preview-overlay" id="image-preview-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); z-index: 2000; display: none; justify-content: center; align-items: center;">
        <div class="image-preview-container" style="position: relative; max-width: 90%; max-height: 90%;">
            <img id="preview-image" style="max-width: 100%; max-height: 100%;">
            <button id="close-preview" style="position: absolute; top: -40px; right: -40px; background-color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 20px; color: black;">×</button>
        </div>
    </div>
    
    <script>
        // 获取DOM元素
        const villages = document.querySelectorAll('.village');
        const popup = document.getElementById('popup');
        const overlay = document.getElementById('overlay');
        const popupTitle = document.getElementById('popup-title');
        const popupContent = document.getElementById('popup-content');
        const closePopup = document.getElementById('close-popup');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const imagePreviewOverlay = document.getElementById('image-preview-overlay');
        const previewImage = document.getElementById('preview-image');
        const closePreview = document.getElementById('close-preview');
        
        // 村庄数据
        const villageData = [
            { 
                name: '明月村', 
                info: '     明月村位于四川省成都市蒲江县甘溪镇，是一座以陶艺文化为核心、融合川西林盘风貌的艺术村落。这里拥有千年制陶历史，是国家级生态文化村、中国乡村旅游创客示范基地，依托丰富的土地、集体资产、人力、生态与数据资源，已成为 “文创 + 文旅 + 农创” 融合发展的乡村振兴典范。',
                resources: '<img src="mingyue.png" alt="详细信息" width="300">',
                suggestions: '1.陶艺文化 + 生态旅游：以明月窑国际陶艺中心为核心，串联蜀山窑、草木染工坊等文创空间，结合茶山竹海与川西林盘景观，打造 "陶艺体验 + 生态研学 + 林盘度假" 精品线路。\n 2.非遗活化 + 产业融合：依托乡土陶艺匠人资源，开发明月村特色陶艺文创产品，开展常态化制陶体验课与陶艺市集，并联动茶产业推出 "陶艺 + 茶旅" 融合业态，推动文化资源转化为经济收益。\n 3.数字赋能 + 产业升级：运用农业生产数据发展智慧茶园管理，通过游客流量数据优化文旅服务，基于文创产品流通数据对接线上电商平台，提升明月村品牌影响力与市场占有率。'
            },
            { 
                name: '呷古村', 
                info: '呷古村位于四川省凉山州越西县，地处大凉山腹地，是典型的彝族聚居村落，兼具彝族特色民俗文化与山地生态风貌，村内彝族文化底蕴深厚，保留着完整的彝族传统习俗、建筑风格与民俗活动。村庄依托山地生态资源、民族文化资源和特色农业基础，以 “党建引领、文化铸魂、产业兴村、生态宜居” 为发展核心，走出了一条民族地区乡村振兴的特色之路，推动彝族文化活态传承与生态农业、乡村旅游融合发展，成为越西县民族村寨治理与产业发展的示范村。',
                resources: '<img src="gagu.png" alt="详细信息" width="300">',
                suggestions: '1.民族文化 + 乡村旅游：以彝族特色村寨为核心，串联山地生态景观、河谷风光，整合彝族土掌房建筑群、非遗工坊、民俗活动广场等资源，打造 “彝族文化体验 + 山地生态观光 + 民俗节庆参与” 精品旅游线路。常态化开展火把节、彝族年等民俗体验活动，推出漆器制作、彝族刺绣、口弦学习等非遗体验项目，完善旅游接待、特色餐饮等配套设施，提升游客体验感，打造大凉山彝族文化文旅特色 IP。<br> 2.特色农业 + 产业融合：依托大凉山原生态地理优势，打造苦荞、花椒、核桃等特色农产品品牌，推动高山杂粮、特色林果深加工，开发苦荞茶、花椒油、彝族特色糕点等深加工产品。联动彝族饮食文化，推出 “农旅融合” 采摘体验、农家餐饮项目，结合电商平台打通线上销售渠道，实现 “从田间到餐桌” 的产业链延伸，带动村民通过农业种植、农产品加工、乡村旅游就业实现多元增收。\n 3.非遗活化 + 文化传承：建立彝族非遗技艺传习基地，依托非遗传承人开展技艺培训，培育村内年轻一代非遗传承者，推动漆器、刺绣等非遗技艺与文创产品结合，开发彝族特色文创摆件、饰品、生活用品等。将彝族文化融入村寨建设，打造彝族文化墙、民俗展示馆，通过歌舞表演、文化宣讲等形式，让彝族文化成为村寨标识，推动民族文化活态传承与对外传播。\n 4.生态保护 + 宜居建设：坚持生态优先发展理念，加强山地森林、河谷水系生态保护，开展村寨人居环境整治，保留彝族传统建筑风格的同时，完善污水、垃圾处理等基础设施。推动 “生态宜居” 与 “文化特色” 融合，打造彝族特色庭院、生态微景观，让村寨既保留大凉山原生态风貌与彝族民族特色，又实现人居环境的现代化提升，打造 “望得见山、看得见水、记得住乡愁” 的彝族特色宜居村寨。\n 5.特色治理 + 乡风提升：持续优化 “党建 + 村民自治 + 民族文化议事会” 治理模式，结合彝族村规民约完善村寨治理制度，推动村规民约与现代乡村治理结合，涵养文明乡风、淳朴民风。常态化开展民族团结、孝老爱亲、邻里和睦等主题活动，依托乡村文化阵地开展文化、技能培训，提升村民综合素质，推动形成民族团结、治理有效、乡风文明的民族村寨发展新格局。'
            },
            { 
                name: '全兴村', 
                info: '全兴村位于四川省成都市崇州市廖家镇，地处黑石河畔，下辖12个村民小组，共有村民1112户3517人，党员112人。该村交通便利，廖太路、安梓路穿插其间，成都第二绕城高速横跨8个村民小组。依托优越的生态本底、深厚的红色底蕴和完善的基层治理体系，全兴村以“党建引领、共治共享、产业兴村”为核心，走出了一条治理有方、发展有力、群众有感的乡村振兴之路，形成“红色文旅+生态农业+文创研学”多元融合的发展格局，打造了“军魂永恒”主题公园等特色地标，成为崇州市基层治理与集体经济发展的示范村。',
                resources: '<img src="quanxing.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1. 红色文旅+生态休闲：以“军魂永恒”主题公园为核心，串联黑石河畔生态景观、吕家林盘、郑家竹韵等川西林盘院落，整合习风堂书院文化阵地，打造“红色研学+生态观光+户外拓展”精品线路，完善特种兵体验场、餐饮住宿等配套设施，提升游客综合体验感，进一步扩大红色文旅IP影响力。\n2. 产业融合+富民增收：深化“社区合伙人”模式，持续回引乡贤、退役军人、返乡创业人才，扩大苗木种植规模，着力打造“全兴苗木”特色品牌；依托4所高校合作资源，升级文创研学产业，开发红色文创、苗木文创等特色产品，联动村内精品民宿、鱼菜共生等村民自有产业，完善“3331”利益分配机制，带动更多村民入股分红、就业增收。\n3. 治理赋能+乡风提升：持续优化“一领四动”治理机制，动态修订村规民约（“十要十不准”），常态化开展“文明家庭”“孝老模范”等先进典型评选活动，依托习风堂书院开展文化宣讲、红色故事分享等活动，引导村民主动参与村级事务管理与乡村环境整治；完善奖惩机制，推动村规民约从“墙上条文”转化为村民自觉遵守的“行动纲领”，涵养文明和谐、邻里和睦的乡风民风。\n4. 数字赋能+品牌升级：运用农业与苗木生产数据发展智慧种植，依托游客流量数据优化文旅服务供给，基于集体经济运营数据提升市场化运营水平；搭建线上宣传与产品销售平台，整合红色文旅、特色苗木、文创产品等核心资源，全面提升全兴村“治理示范+产业特色+生态优美”的整体品牌影响力，推动乡村振兴高质量发展。'
            },
            { 
                name: '高产村', 
                info: '高产村位于成都简阳市，地处成渝双城经济圈重要节点，是一个以粮油种植为基础、融合特色果蔬产业与乡村生态的农业型村落。这里依托丰富的土地、集体资产、人力、生态与数据资源，正朝着 “高产农业 + 农旅融合 + 乡村治理” 的乡村振兴目标稳步推进。',
                resources: '<img src="gaochan1.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1.高产农业 + 生态旅游：以高标准农田为核心，串联特色果园与沱江支流生态景观，打造 “粮油研学 + 果蔬采摘 + 田园观光” 精品线路，吸引城市游客体验农耕文化。\n2.产业融合 + 业态升级：依托农技乡土人才资源，开发高产村特色粮油、果蔬文创产品，开展常态化农耕体验课与农产品市集，并联动加工中心推出 “从田间到餐桌” 的溯源产品，推动农业资源转化为经济收益。\n3.数字赋能 + 品牌提升：运用农业生产数据发展智慧种植，通过流通数据对接线上电商平台，提升高产村特色农产品的品牌影响力与市场占有率，同时依托治理数据优化社区服务，打造宜居宜业的和美乡村。'
            },
            { 
                name: '嘉禾社区', 
                info: '嘉禾社区位于成都市双流区黄龙溪镇，兼具深厚的红色文化底蕴与秀美的生态田园风貌。这里是双流第一支地下党组织的诞生地，也是 “黄龙溪女子彩龙” 非遗文化的传承地。社区拥有丰富的土地、集体资产、人力、生态与数据资源，为乡村振兴和产业发展奠定了坚实基础。',
                resources: '<img src="jiahe.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1. 红色文化 + 生态旅游：以 “嘉禾记忆・红色茶馆” 为核心，串联时光隧道文化墙、《嘉禾庄的枪声》沉浸式党课等红色资源，结合生态微公园与田园景观，打造 “红色研学 + 生态休闲” 精品线路。\n2. 非遗活化 + 产业融合：依托女子彩龙队等非遗资源，开发彩龙文创产品，开展常态化展演，并联动乡土工匠打造非遗工坊，推动文化资源转化为经济收益。                \n3. 数字赋能 + 产业升级：运用农业生产数据发展智慧种植，通过农产品流通数据对接电商平台，提升嘉禾特色农产品的品牌影响力与市场占有率。'
            },
            { 
                name: '竹艺村', 
                info: '竹艺村位于四川省成都市崇州市道明镇，是一座以国家级非物质文化遗产 “道明竹编” 为核心，融合川西林盘风貌与现代艺术的文创村落。这里依托丰富的土地、集体资产、人力、生态与数据资源，已成为 “非遗活化 + 乡村旅游 + 生态农业” 融合发展的乡村振兴标杆。',
                resources: '<img src="zhuyi.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1. 竹编文化 + 生态旅游：以道明竹编非遗工坊为核心，串联竹里建筑、竹文化体验园等文创空间，结合竹海田园与川西林盘景观，打造 “竹编体验 + 生态研学 + 林盘度假” 精品线路。\n2. 非遗活化 + 产业融合：依托竹编非遗传承人资源，开发竹艺村特色竹编文创产品，开展常态化竹编体验课与竹编市集，并联动生态农业推出 “竹编 + 农旅” 融合业态，推动文化资源转化为经济收益。\n3. 数字赋能 + 产业升级：运用农业生产数据发展智慧竹林管理，通过游客流量数据优化文旅服务，基于竹编产品流通数据对接线上电商平台，提升竹艺村品牌影响力与市场占有率。'
            },
            { 
                name: '天星村', 
                info: '天星村位于成都市温江区寿安镇，地处岷江支流金马河畔，是一座以川派盆景为特色、融合林盘生态与花木产业的川西水乡村落。这里依托丰富的土地、集体资产、人力、生态与数据资源，已成为 “花木产业 + 生态旅游 + 林盘经济” 融合发展的乡村振兴示范村。',
                resources: '<img src="tianxing.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1. 盆景文化 + 生态旅游：以川派盆景展示中心为核心，串联金马河湿地、林盘民宿等空间，结合花木田园景观，打造 “盆景研学 + 生态观光 + 林盘度假” 精品线路。\n2. 产业融合 + 业态升级：依托川派盆景匠人资源，开发天星村特色盆景文创产品，开展常态化盆景制作体验课与花艺市集，并联动花木产业推出 “盆景认养 + 园艺体验” 融合业态，推动文化资源转化为经济收益。\n3. 数字赋能 + 品牌提升：运用花木生产数据发展智慧种植，通过游客流量数据优化文旅服务，基于盆景流通数据对接线上电商平台，提升天星村川派盆景的品牌影响力与市场占有率。'
            },
            { 
                name: '陶家营村', 
                info: '陶家营村位于四川省凉山州越西县中所镇，地处南方丝绸之路零关古道沿线，是融合了彝汉文化的传统村落。这里拥有秀美的水观音泉水资源、深厚的茶马古道历史底蕴，以及以水稻、樱桃为主的特色农业基础。依托丰富的土地、集体资产、人力、生态与数据资源，正朝着 “农文旅融合” 的乡村振兴目标稳步发展。',
                resources: '<img src="taojiaying.jpg" alt="核心资源类型与价值分析" width="300">',
                suggestions: '1.古道文化 + 生态旅游：以茶马古道遗址为核心，串联水观音泉景区、彝汉民俗文化体验点，结合田园村落风貌，打造 “古道研学 + 泉水康养 + 民俗体验” 精品线路。\n 2. 非遗活化 + 产业融合：依托彝汉乡土工匠资源，开发彝族漆器、传统竹编等文创产品，开展常态化手工艺体验课与民俗市集，并联动特色农业推出 “樱桃采摘 + 农耕体验” 融合业态，推动文化资源转化为经济收益。\n 3. 数字赋能 + 产业升级：运用农业生产数据发展智慧种植，通过游客流量数据优化文旅服务，基于农产品流通数据对接线上电商平台，提升陶家营村特色农产品与文创产品的品牌影响力。'
            },
            { 
                name: '宝胜村', 
                info: '<img src="baosheng1.jpg" alt="村情介绍" width="300">',
                industry: '<img src="baosheng2.jpg" alt="产业发展现状" width="300">',
                employment: '<img src="baosheng3.jpg" alt="创业就业现状分析" width="300">',
                policy: '<img src="baosheng4.jpg" alt="政策支持体系" width="300">',
                challenges: '<img src="baosheng5.jpg" alt="目前的挑战与问题" width="300">'
            },
            { 
                name: '岷江村', 
                info: '<img src="minjiang1.jpg" alt="村情介绍" width="300">',
                industry: '<img src="minjiang2.jpg" alt="产业结构与创业模式创新" width="300">',
                cases: '<img src="minjiang3.jpg" alt="具体创业案例分析" width="300">',
                talent: '<img src="minjiang4.jpg" alt="人才政策与培养体系" width="300">',
                resources: '<img src="minjiang5.jpg" alt="资源盘活与多元筹资" width="300">',
                digital: '<img src="minjiang6.jpg" alt="数字技术应用" width="300">',
                governance: '<img src="minjiang7.jpg" alt="基层治理创新" width="300">',
                economy: '<img src="minjiang8.jpg" alt="经济数据与成效分析" width="300">'
            },
            { 
                name: '甘哈觉莫村', 
                info: '<img src="ganhajuemo1.jpg" alt="村情介绍" width="300">',
                employment: '<img src="ganhajuemo2.jpg" alt="创业就业发展现状" width="300">',
                policy: '<img src="ganhajuemo3.jpg" alt="创业就业政策支持" width="300">',
                effects: '<img src="ganhajuemo4.jpg" alt="发展成效与经济效益" width="300">',
                challenges: '<img src="ganhajuemo5.jpg" alt="面临的挑战与问题" width="300">'
            }
        ];
        
        // 打开弹出窗口
        function openPopup(village) {
            const name = village.dataset.name;
            
            // 从villageData数组中获取村庄数据
            const villageDataItem = villageData.find(item => item.name === name);
            
            if (villageDataItem) {
                popupTitle.textContent = name;
                
                // 清空标签页内容
                const tabsContainer = document.querySelector('.tabs');
                const tabContentContainer = document.querySelector('.tab-content');
                tabsContainer.innerHTML = '';
                tabContentContainer.innerHTML = '';
                
                // 根据村庄名称创建不同的标签页
                let tabs = [];
                
                if (name === '甘哈觉莫村') {
                    tabs = [
                        { id: 'info', label: '村情介绍', content: villageDataItem.info || '' },
                        { id: 'employment', label: '创业就业发展现状', content: villageDataItem.employment || '' },
                        { id: 'policy', label: '创业就业政策支持', content: villageDataItem.policy || '' },
                        { id: 'effects', label: '发展成效与经济效益', content: villageDataItem.effects || '' },
                        { id: 'challenges', label: '面临的挑战与问题', content: villageDataItem.challenges || '' }
                    ];
                } else if (name === '宝胜村') {
                    tabs = [
                        { id: 'info', label: '村情介绍', content: villageDataItem.info || '' },
                        { id: 'industry', label: '产业发展现状', content: villageDataItem.industry || '' },
                        { id: 'employment', label: '创业就业现状分析', content: villageDataItem.employment || '' },
                        { id: 'policy', label: '政策支持体系', content: villageDataItem.policy || '' },
                        { id: 'challenges', label: '目前的挑战与问题', content: villageDataItem.challenges || '' }
                    ];
                } else if (name === '岷江村') {
                    tabs = [
                        { id: 'info', label: '村情介绍', content: villageDataItem.info || '' },
                        { id: 'industry', label: '产业结构与创业模式创新', content: villageDataItem.industry || '' },
                        { id: 'cases', label: '具体创业案例分析', content: villageDataItem.cases || '' },
                        { id: 'talent', label: '人才政策与培养体系', content: villageDataItem.talent || '' },
                        { id: 'resources', label: '资源盘活与多元筹资', content: villageDataItem.resources || '' },
                        { id: 'digital', label: '数字技术应用', content: villageDataItem.digital || '' },
                        { id: 'governance', label: '基层治理创新', content: villageDataItem.governance || '' },
                        { id: 'economy', label: '经济数据与成效分析', content: villageDataItem.economy || '' }
                    ];
                } else {
                    // 默认标签页
                    tabs = [
                        { id: 'info', label: '村情介绍', content: villageDataItem.info || '' },
                        { id: 'resources', label: '核心资源类型与价值分析', content: villageDataItem.resources || '' },
                        { id: 'suggestions', label: '资源整合发展建议', content: villageDataItem.suggestions || '' }
                    ];
                }
                
                // 创建标签按钮和内容面板
                tabs.forEach((tab, index) => {
                    // 创建标签按钮
                    const tabBtn = document.createElement('button');
                    tabBtn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
                    tabBtn.dataset.tab = tab.id;
                    tabBtn.textContent = tab.label;
                    tabsContainer.appendChild(tabBtn);
                    
                    // 创建内容面板
                    const tabPane = document.createElement('div');
                    tabPane.className = `tab-pane ${index === 0 ? 'active' : ''}`;
                    tabPane.id = `${tab.id}-tab`;
                    
                    // 创建内容
                    if (tab.content.includes('<img')) {
                        // 处理图片内容，添加点击放大功能
                        const imgContainer = document.createElement('div');
                        imgContainer.innerHTML = tab.content;
                        const img = imgContainer.querySelector('img');
                        if (img) {
                            img.style.cursor = 'pointer';
                            img.addEventListener('click', function() {
                                previewImage.src = this.src;
                                imagePreviewOverlay.style.display = 'flex';
                            });
                        }
                        tabPane.appendChild(imgContainer);
                    } else {
                        // 处理文字内容，按点分段
                        const content = tab.content;
                        if (content.includes('1.') || content.includes('1、')) {
                            // 按数字序号分段
                            const segments = content.split(/\n\s*[0-9]+[.、]/).filter(s => s.trim());
                            segments.forEach((segment, index) => {
                                if (segment.trim()) {
                                    const p = document.createElement('p');
                                    p.textContent = (index + 1) + '. ' + segment.trim();
                                    tabPane.appendChild(p);
                                }
                            });
                        } else {
                            // 普通段落
                            const p = document.createElement('p');
                            p.textContent = content;
                            tabPane.appendChild(p);
                        }
                    }
                    tabContentContainer.appendChild(tabPane);
                });
                
                // 重新绑定标签页切换事件
                const tabBtns = document.querySelectorAll('.tab-btn');
                tabBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        // 移除所有标签按钮的active类
                        tabBtns.forEach(b => b.classList.remove('active'));
                        // 添加当前标签按钮的active类
                        this.classList.add('active');
                        
                        // 获取当前标签的data-tab属性
                        const tabId = this.getAttribute('data-tab');
                        
                        // 隐藏所有内容面板
                        const tabPanes = document.querySelectorAll('.tab-pane');
                        tabPanes.forEach(pane => pane.classList.remove('active'));
                        
                        // 显示当前标签对应的内容面板
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });
                
                popup.classList.add('active');
                overlay.classList.add('active');
            }
        }
        
        // 关闭弹出窗口
        function closePopupFunc() {
            popup.classList.remove('active');
            overlay.classList.remove('active');
        }
        
        // 点击村庄事件
        villages.forEach(village => {
            village.addEventListener('click', () => {
                openPopup(village);
            });
        });
        
        // 关闭弹出窗口事件
        closePopup.addEventListener('click', closePopupFunc);
        overlay.addEventListener('click', closePopupFunc);
        
        // 图片预览弹窗关闭事件
        closePreview.addEventListener('click', function() {
            imagePreviewOverlay.style.display = 'none';
        });
        
        imagePreviewOverlay.addEventListener('click', function(e) {
            if (e.target === this) {
                imagePreviewOverlay.style.display = 'none';
            }
        });
        
        // 搜索功能
        function searchVillage() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (!searchTerm) return;
            
            const foundVillage = villageData.find(village => 
                village.name.toLowerCase().includes(searchTerm)
            );
            
            if (foundVillage) {
                // 找到村庄后，模拟点击
                const villageElement = document.querySelector(`[data-name="${foundVillage.name}"]`);
                if (villageElement) {
                    openPopup(villageElement);
                    // 滚动到村庄位置
                    villageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            } else {
                alert('未找到该村庄，请尝试其他名称');
            }
        }
        
        // 搜索按钮点击事件
        searchBtn.addEventListener('click', searchVillage);
        
        // 回车键搜索
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchVillage();
            }
        });
        
        // 标签页切换功能
        document.addEventListener('DOMContentLoaded', function() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有标签按钮的active类
                    tabBtns.forEach(b => b.classList.remove('active'));
                    // 添加当前标签按钮的active类
                    this.classList.add('active');
                    
                    // 获取当前标签的data-tab属性
                    const tabId = this.getAttribute('data-tab');
                    
                    // 隐藏所有内容面板
                    const tabPanes = document.querySelectorAll('.tab-pane');
                    tabPanes.forEach(pane => pane.classList.remove('active'));
                    
                    // 显示当前标签对应的内容面板
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        });
    </script>
</body>
</html>